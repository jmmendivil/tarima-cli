#!/usr/bin/env node

var start = new Date();

var run = require('./'),
    path = require('path'),
    clc = require('cli-color');

var pwd = process.cwd();

run({
  src: path.join(pwd, 'src'),
  dest: path.join(pwd, 'dest/build'),
  cache: path.join(pwd, 'dest/index.json'),
  watch: process.argv.indexOf('--watch') > -1,
  ignored: ['**/{images,sprites,fonts,icons*,main,views,test,docs}/**'],
  exclude: ['!**/_*', '!**/_*/**'],
  bundle: true,
  rename: {
    coffee: 'js',
    less: 'css',
    jade: 'html'
  },
  less: {
    paths: [pwd]
  }
}, function(err, result) {
  if (err) {
    console.log(clc.red(err.stack || err));
  }

  console.log(clc.cyan(result.files.length + ' file(s) synced in ' + (((new Date()) - start) / 1000) + 's'));
});
